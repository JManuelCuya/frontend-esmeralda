<div class="container mt-4">
  <h4 class="mb-4">Listado de Atenciones Registradas</h4>

  <table id="tabla-atenciones" class="table table-striped table-bordered">
    <thead class="table-success">
      <tr>
        <th>ID</th>
        <th>Empleado</th>
        <th>Centro de Costos</th>
        <th>Tipo de Atención</th>
        <th>Motivo</th>
        <th>Observación</th>
        <th>Fecha Inicio</th>
        <th>Fecha Fin</th>
        <th>Hora Inicio</th>
        <th>Hora Fin</th>
        <th>Tiempo Empleado</th>
        <th>Estado Atención</th>
        <th>Costo</th>
        <th>Prioridad</th>
        <th>Detalle</th>
      </tr>
    </thead>
    <tbody id="tablaAtenciones">
      <!-- Se cargará dinámicamente -->
    </tbody>
  </table>

  <div id="mensajeError" class="text-danger mt-3"></div>
</div>

<!-- Panel lateral para mostrar detalle -->
<div class="offcanvas offcanvas-end" tabindex="-1" id="detalleOffcanvas" aria-labelledby="detalleOffcanvasLabel">
  <div class="offcanvas-header">
    <h5 class="offcanvas-title" id="detalleOffcanvasLabel">
      Detalle de Atención
    </h5>
    <button type="button" class="btn-close text-reset" data-bs-dismiss="offcanvas"></button>
  </div>
  <div class="offcanvas-body">
    <form class="row g-3" id="formDetalle">
      <div class="estado-flechas">
        <div class="step-flecha" data-step="1">Creado</div>
        <div class="step-flecha" data-step="2">Proceso</div>
        <div class="step-flecha" data-step="3">Gestión</div>
        <div class="step-flecha" data-step="4">Finalizada</div>
      </div>

      <div class="col-md-6">
        <label>Empleado</label>
        <input type="text" class="form-control" id="empleado" readonly />
      </div>
      <div class="col-md-6">
        <label>Centro de Costos</label>
        <input type="text" class="form-control" id="centro_costo" readonly />
      </div>
      <div class="col-md-6">
        <label>Tipo Atención</label>
        <input type="text" class="form-control" id="tipo_atencion" readonly />
      </div>
      <div class="col-md-6">
        <label>Fecha Inicio</label>
        <input type="date" class="form-control" id="fecha_atencion" readonly />
      </div>
      <div class="col-md-6">
        <label>Fecha Fin</label>
        <input type="date" class="form-control" id="fecha_atencion_fin" />
      </div>
      <div class="col-md-6">
        <label>Hora Inicio</label>
        <input type="time" class="form-control" id="hora_inicio" readonly />
      </div>
      <div class="col-md-6">
        <label>Hora Fin</label>
        <input type="time" class="form-control" id="hora_fin" />
      </div>
      <div class="col-md-12">
        <label>Motivo</label>
        <input type="text" class="form-control" id="motivo" readonly />
      </div>
      <div class="col-md-12">
        <label>Observación</label>
        <textarea class="form-control" id="observacion" rows="3" readonly></textarea>
      </div>
      <div class="col-md-6">
        <label>Costo Estimado</label>
        <input type="text" class="form-control" id="costo_estimado" readonly />
      </div>

      <div class="col-md-6">
        <label for="estado_atencion" class="form-label">Estado</label>
        <select id="estado_atencion" class="form-select"></select>
      </div>
      <div class="col-md-12">
        <label>Fecha Registro</label>
        <input type="datetime-local" class="form-control" id="fecha_registro" readonly />
      </div>
      <div class="col-md-6">
        <label>Costo Final</label>
        <input type="number" step="0.01" min="0" class="form-control" id="costo_real" />
      </div>

      <p><strong>Última actualización:</strong> <span id="fechaActualizacion">-</span></p>

    </form>
    <div class="col-12 d-flex justify-content-end gap-2">
      <button type="button" class="btn btn-success" id="btnGuardarEstado">
        <i class="fa-solid fa-floppy-disk"></i> Guardar
      </button>
      <button type="button" class="btn btn-primary" id="btnCerrarAtencion" disabled>
        <i class="fa-solid fa-lock"></i> Cerrar atención
      </button>
    </div>

  </div>
</div>